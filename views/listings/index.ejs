<% layout("/layouts/boilerplate.ejs") %>
    <body>
        <div class="container-fluid mt-2 mb-2" id="filters">
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/3726d94b-534a-42b8-bca0-a0304d912260.jpg" alt="">
            <p>Trending</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/bcd1adc0-5cee-4d7a-85ec-f6730b0f8d0c.jpg" alt="">
            <p>Beachfront</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/4d4a4eba-c7e4-43eb-9ce2-95e1d200d10e.jpg" alt="">
            <p>Treehouses</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/3b1eb541-46d9-4bef-abc4-c37d77e3c21b.jpg" alt="">
            <p>Amazing views</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/7630c83f-96a8-4232-9a10-0398661e2e6f.jpg" alt="">
            <p>Rooms</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/677a041d-7264-4c45-bb72-52bff21eb6e8.jpg" alt="">
            <p>Lakefronts</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/c8e2ed05-c666-47b6-99fc-4cb6edcde6b4.jpg" alt="">
            <p>Lux</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/1b6a8b70-a3b6-48b5-88e1-2243d9172c06.jpg" alt="">
            <p>Castles</p>
          </div>
          <div class="filter">
            <img src="https://a0.muscache.com/pictures/ed8b9e47-609b-44c2-9768-33e6a22eccb2.jpg" alt="">
            <p>Ionic cities</p>
          </div>
          <div class="tax-toggle border p-3 rounded">
            <div class="form-check form-switch form-check-reverse">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                <label class="form-check-label" for="flexSwitchCheckDefault">Display total before taxes</label>
              </div>
          </div>
        </div>
        <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 p-5">
            <% for(listing of allListings){ %>
                <div class="card col-12 col-md-6 col-lg-4">
                    <img src="<%= listing.image.url %>" class="card-img-top" alt="..." style="height: 20rem;">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%= listing.title %>
                        </h5>

                        <p class="card-text">
                        <h6>
                            &#8377; <%= listing.price.toLocaleString("en-IN") %>/night <span class="tax-info"> +18% GST</span>
                        </h6>
                        <h6 class="tax-info">&#8377; <%= (listing.price + (listing.price * 0.18)).toLocaleString("en-IN") %></h6>
                        <h6>
                            <%= listing.location %>, <%= listing.country %>
                        </h6>
                        </p>
                        <a href="/listing/<%= listing._id %>" class="btn btn-primary">Check Out</a>
                    </div>
                </div>
                <% } %>
        </div>
    </body>

    <script>
        const toggler = document.querySelector("#flexSwitchCheckDefault")
        toggler.addEventListener("click",()=>{
            const infos = document.querySelectorAll(".tax-info")
            for(info of infos){
                if(info.style.display != "inline"){
                    info.style.display = "inline"
                }else{
                    info.style.display = "none"
                }
            }
        })
    </script>